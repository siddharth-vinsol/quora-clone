<h1 class="page-heading">Your Questions</h1>

<div class="question-search-bar">
  <%= search_form_for @q, url: questions_path do |form| %>
    <%= form.search_field :title_cont, placeholder: 'Question Title', class: 'search-field' %>
    <%= form.submit 'Search Question by Title' %>
  <% end %>
</div>

<%= link_to 'Post a new Question', new_question_path %>

<div class="questions-container flex-col">
  <% @questions.each do |question| %>
    <div class="question-container">
      <div class="question-container-left">
        <%= render partial: 'question_details', locals: { question: question } %>
      </div>
      <div class="question-container-right">
        <%= button_to 'View', question_path(question.permalink), method: :get, class: 'view-button' %>
        <% if question.disabled_at? %>
          <div>Disabled by admin on <%= question.disabled_at.to_date %></div>
        <% else %>
          <% if question.editable? %>
            <%= button_to 'Edit', edit_question_path(question.permalink), method: :get, class: 'edit-button' %>
            <%= button_to 'Delete', question_path(question.permalink), method: :delete, class: 'delete-button' %>
          <% end %>
          <% unless question.published_at? %>
            <%= button_to 'Publish', publish_question_path(question.permalink), method: :post, class: 'publish-button' %>
          <% end %>
        <% end %>
      </div>
    </div>
  <% end %>
</div>
