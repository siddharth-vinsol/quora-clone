<% content_for :head do %>
  <%= javascript_include_tag 'scripts/vote_handler', defer: true %>
<% end %>

<div class="page-heading">Question Page</div>

<div class="question">
  <div class="question-header">
    <div>
      <div class="question-field-label">Title: </div>
      <div class="question-field-value"><%= @question.title %></div>
    </div>
    <div>
      <div class="question-field-label">Asked By: </div>
      <div class="question-field-value"><%= @question.user.name %></div>
    </div>
  </div>
  <div class="question-content">
    <div class="question-field-value"><%= @question.content %></div>
  </div>
  <div class="question-topics">
    Related Topics: 
    <% @question.topic_list.each do |topic| %>
      <div class="question-topic"><%= topic %></div>
    <% end %>
  </div>
  <div class="uploaded-file">
    <% if @question.file_attached? %>
      <div>File attached: <%= filename_from_file(@question.attachment) %></div>
      <%= render_filelink_if_exists(@question.attachment) %>
    <% end %>
  </div>

  <% if signed_in? %>
    <%= render 'answers/form' %>
  <% else %>
    <div class="page-heading"><%= t('login_before_continue')%></div>
  <% end%>
  
  <h3><u>Answers by other Users</u></h3>
  <div class="answers-container" data-ref="answers-container">
    <%= render @question.sorted_answers %>
  </div>
</div>
