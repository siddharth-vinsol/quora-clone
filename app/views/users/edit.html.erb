<div class="form">
  <div class="form-header">Update Profile</div>
  <% if profile_image_attached?(current_user) %>
    <%= form_with url: remove_photo_user_path, method: :delete, class: 'cross-button' do |form| %>
      <%= image_tag 'cross.png', { onclick: 'this.parentElement.submit()' } %>
    <% end %>
  <% end %>
  <%= form_with model: current_user, url: user_path do |form| %>
    <div class="img-field">
      <%= image_tag user_profile_image_link(current_user), class: 'profile-img' %>
      <%= form.label :profile_image, 'Upload New Profile Picture' %>
      <%= form.file_field :profile_image, accept: User::VALID_IMAGE_MIME_TYPES.join(', ') %>
    </div>
    <%= render partial: 'shared/form_field_error', locals: { model_object: current_user, attribute: :profile_image } %>

    <div class="form-field">
      <%= form.label :name, 'New name' %>
      <%= form.text_field :name %>
    </div>
    <%= render partial: 'shared/form_field_error', locals: { model_object: current_user, attribute: :name } %>

    <div class="form-field">
      <%= form.label :username, 'Username' %>
      <%= form.text_field :username %>
    </div>
    <%= render partial: 'shared/form_field_error', locals: { model_object: current_user, attribute: :username } %>

    <div class="form-topics">
      <%= render partial: 'topics/form', locals: { form: form, entity: current_user }%>
    </div>

    <div class="submit-field">
      <%= form.submit 'Update Profile' %>
    </div>
  <% end %>
  <%= button_to 'Change Password', password_user_path, method: :get %>
</div>
